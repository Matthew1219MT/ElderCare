<?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools">

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#D9D4CC"
        android:fillViewport="true">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:padding="22dp">

            <!-- Header Section (Same as Disclaimer & Face Scan) -->
            <RelativeLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="16dp">

                <!-- Back button -->
                <ImageButton
                    android:id="@+id/btnBack"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_menu_back"
                    android:background="?attr/selectableItemBackgroundBorderless"
                    android:contentDescription="Back"
                    android:layout_alignParentStart="true"
                    app:tint="#000000" />

                <!-- Logo -->
                <ImageView
                    android:id="@+id/logo"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/eldercare_textlogo"
                    android:contentDescription="ElderCare Logo"
                    android:layout_centerInParent="true" />

            </RelativeLayout>

            <!-- Pie Chart Container -->
            <FrameLayout
                android:layout_width="241dp"
                android:layout_height="241dp"
                android:layout_marginTop="60dp"
                android:layout_gravity="center_horizontal">

                <!-- Pie Chart View -->
                <com.github.mikephil.charting.charts.PieChart
                    android:id="@+id/pieChart"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" />

                <!-- Fallback: Hidden 3D Viewer (Original functionality) -->
                <android.opengl.GLSurfaceView
                    android:id="@+id/glSurfaceView"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:visibility="gone" />

            </FrameLayout>

            <!-- Asymmetry Rating Caption -->
            <TextView
                android:id="@+id/tvSimilarityRating"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="20dp"
                android:paddingStart="24dp"
                android:paddingEnd="24dp"
                android:text="15% Asymmetry Detected"
                android:textColor="#000000"
                android:textSize="36sp"
                android:fontFamily="@font/font_extrabold"
                android:textAlignment="center"
                android:gravity="center"
                android:letterSpacing="0"
                android:lineSpacingMultiplier="1.0"
                tools:text="25% Asymmetry Detected" />

            <!-- Disease Description -->

            <!-- Scan Information Panel (Optional) -->
            <TextView
                android:id="@+id/tvDiseaseDescription"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="20dp"
                android:fontFamily="@font/font_regular"
                android:gravity="center"
                android:lineSpacingExtra="4dp"
                android:paddingStart="10dp"
                android:paddingEnd="10dp"
                android:text="Your facial symmetry analysis shows balanced features with minimal asymmetry detected. This is within normal ranges and does not indicate signs of acute neurological conditions such as stroke. However, if you experience sudden facial drooping, numbness, confusion, or difficulty speaking, seek immediate medical attention. This screening tool is not a substitute for professional medical diagnosis."
                android:textAlignment="center"
                android:textColor="#000000"
                android:textSize="18sp" />

            <TextView
                android:id="@+id/tvScanInfo"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="24dp"
                android:text="Scan ID: 12345\nDate: 2025-01-20\nVertices: 468 points"
                android:textColor="#666666"
                android:textSize="14sp"
                android:fontFamily="@font/robotomono_regular"
                android:textAlignment="center"
                android:gravity="center"
                android:lineSpacingExtra="2dp"
                android:visibility="gone"
                tools:visibility="visible" />

            <!-- Hidden rotation controls (for 3D mode if needed) -->
            <LinearLayout
                android:id="@+id/rotationControls"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:layout_gravity="center"
                android:layout_marginTop="16dp"
                android:visibility="gone">

                <ImageButton
                    android:id="@+id/btnRotateLeft"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:src="@drawable/ic_keyboard_arrow_left"
                    android:background="?attr/selectableItemBackgroundBorderless"
                    android:contentDescription="Rotate left"
                    app:tint="#000000" />

                <ImageButton
                    android:id="@+id/btnRotateUp"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:src="@drawable/ic_keyboard_arrow_up"
                    android:background="?attr/selectableItemBackgroundBorderless"
                    android:contentDescription="Rotate up"
                    app:tint="#000000"
                    android:layout_marginStart="8dp" />

                <ImageButton
                    android:id="@+id/btnRotateDown"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:src="@drawable/ic_keyboard_arrow_down"
                    android:background="?attr/selectableItemBackgroundBorderless"
                    android:contentDescription="Rotate down"
                    app:tint="#000000"
                    android:layout_marginStart="8dp" />

                <ImageButton
                    android:id="@+id/btnRotateRight"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:src="@drawable/ic_keyboard_arrow_right"
                    android:background="?attr/selectableItemBackgroundBorderless"
                    android:contentDescription="Rotate right"
                    app:tint="#000000"
                    android:layout_marginStart="8dp" />

                <ImageButton
                    android:id="@+id/btnReset"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:src="@drawable/ic_refresh"
                    android:background="?attr/selectableItemBackgroundBorderless"
                    android:contentDescription="Reset view"
                    app:tint="#000000"
                    android:layout_marginStart="16dp" />

            </LinearLayout>

            <!-- Disclaimer -->
            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="32dp"
                android:text="âš  This is a screening tool only. Always consult a healthcare professional for medical advice and diagnosis."
                android:textColor="#8C2E2E"
                android:textSize="14sp"
                android:fontFamily="@font/font_regular"
                android:textAlignment="center"
                android:gravity="center"
                android:paddingStart="16dp"
                android:paddingEnd="16dp"
                android:layout_marginBottom="24dp" />

        </LinearLayout>

    </ScrollView>

</layout>